<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="https://miro.com/app/static/sdk/v2/miro.js"></script>
    <title>Twino</title>
  </head>
  <body>
    
    <div id="root">
        <div class="grid wrapper" id="twine-container">
            <!--<iframe id="dynamicIframe" style="
                width: 95vw;
                height: 95vh;
            "></iframe>-->
            <!--<object id="twine-container" data="" type="text/html" width="600" height="400"></object>-->

        </div>
    </div>

    <script>
      function removeSpecificTags(input, tag) {
          const regex = new RegExp(`<${tag}[^>]*>|</${tag}>`, 'gi'); // Match opening and closing tags
          return input.replace(regex, ''); // Replace them with an empty string
      }
      
      async function getData () {
          // Retrieve the data from within the modal
          const data = await miro.board.ui.getModalData();
          //const response = await fetch('/test.html');
          //const data = await response.text();

          // Parent
          //const parent = document.getElementById('root');
          
          // Select the iframe
          /*const iframe = document.createElement('iframe');
          iframe.src = data;
          parent.appendChild(iframe);*/

          // Write the content to the iframe
          /*const iframeDoc = iframe.contentDocument || iframe.contentWindow.document;
          iframeDoc.open();
          iframeDoc.write(data);
          iframeDoc.close();*/
          //iframe.src = data;
          //window.open(data, '_blank');
          /*const container = document.getElementById('twine-container');
          container.data = data;*/
          //const container = document.getElementById('twine-container');
          //container.innerHTML = removeSpecificTags(removeSpecificTags(data.substring(15), 'html'), 'body');
      }
      getData();
    </script>
  </body>
</html>
